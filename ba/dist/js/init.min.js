/* ------------------------------------
Template Name: ae
Description: Responsive HTML5 / CSS3 Template
Version: 1.0
Author: Ahmed El-agamy

Table of Content :

01 Remove Placeholder
-------------------------------------- */

(function ($) {

    "use strict";

    $(document).ready(function () {

        $('#projects_single').owlCarousel({
            loop: false,
            nav: true,
            //rtl: true,
            margin: 8,
            //autoWidth:true,
            responsiveClass: true,
            autoplayHoverPause: true,
            responsive: {
                0: {
                    items: 3,
                    dots: false,
                    nav: false,
                },
                600: {
                    items: 3,
                    dots: false,

                },
                1000: {
                    items: 5,
                    dots: false,
                }
            }
        });

        $('.catgories-loop').owlCarousel({
            loop: true,
            nav: true,
            //rtl: true,
            margin: 15,
            //autoWidth:true,
            responsiveClass: true,
            autoplay: true,
            autoplayTimeout: 5000,
            autoplayHoverPause: true,
            responsive: {
                0: {
                    items: 2,
                    autoWidth: false,
                    stagePadding: 0,
                    dots: false,
                },
                600: {
                    items: 3,
                    dots: false,

                },
                1000: {
                    items: 5,
                    dots: false,

                }
            }
        });
        $(".owl-prev").html('<i class="fa fa-angle-left"></i>');
        $(".owl-next").html('<i class="fa fa-angle-right"></i>');

        $('#list-style').click(function () {
            $('.products .row').addClass('pro-list');
            $(this).addClass('btn-secondary');
            $('#grid-style').removeClass('btn-secondary');
        });

        $('#grid-style').click(function () {
            $('.products .row').removeClass('pro-list');
            $('#list-style').removeClass('btn-secondary');
            $('#grid-style').addClass('btn-secondary');
        });


        if (window.outerWidth > 992) {
            $('#blog_sidebar, #social').stickySidebar({
                topSpacing: 30,
                bottomSpacing: 30
            });

            $('#order_right').stickySidebar({
                topSpacing: 30,
                bottomSpacing: 30
            });

            $('#cart_right').stickySidebar({
                topSpacing: 30,
                bottomSpacing: 30
            });
        }

        // init Masonry
        var $grid = $('.grid').masonry({
            // options
            itemSelector: '.grid-item',
            //originLeft: false
        });
        // layout Masonry after each image loads
        $grid.imagesLoaded().progress(function () {
            $grid.masonry('layout');
        });

        // Bootstrap 4 Popover
        $('[data-toggle="popover"]').popover();

        // Bootstrap 4 Tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // Scroll To Top
        $('#top').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });

        $(window).scroll(function () {
            var height = $(window).scrollTop();
            if (height > 200) {
                $('#top').fadeIn().css("display", "block");
            } else {
                $('#top').fadeOut();
            }
        });

        // Close when click on body (Outside elements)
        $('body').click(function () {
            $('.cart-box').slideUp(300);
            $('.wc-categories-menu').removeClass('wc-on');
            $('.wc-categories-btn').removeClass('wc-btn-on');
        });

        // Stop element action
        $('.cart-box, .wc-categories-menu').click(function (e) {
            e.stopPropagation();
        });

        $('.wc-categories-btn').click(function (e) {
            $('.wc-categories-menu').toggleClass('wc-on');
            $(this).toggleClass('wc-btn-on');
            e.stopPropagation();
        });

        /* --------------------
		01- Remove PlaceHolder.
	----------------------- */
        function aePlaceHolder() {
            $('input,textarea').focus(function () {
                $(this).data('placeholder', $(this).attr('placeholder'))
                    .attr('placeholder', '');
            }).blur(function () {
                $(this).attr('placeholder', $(this).data('placeholder'));
            });
        }
        aePlaceHolder();

        function ripplelink() {
            var ink, d, x, y;
            $(".mob-click, .btn").click(function (e) {
                if ($(this).find(".mnk").length === 0) {
                    $(this).prepend("<span class='mnk'></span>");
                }

                ink = $(this).find(".mnk");
                ink.removeClass("ripple");

                if (!ink.height() && !ink.width()) {
                    d = Math.max($(this).outerWidth(), $(this).outerHeight());
                    ink.css({
                        height: d,
                        width: d
                    });
                }

                x = e.pageX - $(this).offset().left - ink.width() / 2;
                y = e.pageY - $(this).offset().top - ink.height() / 2;

                ink.css({
                    top: y + 'px',
                    left: x + 'px'
                }).addClass("ripple");
            });

        }
        ripplelink();
        /* --------------------
		02- Navigation.
	----------------------- */
        function aeNavigation() {
            var nomegaMenuItem = $('#AE_primary_nav .menu-item-has-children');
            nomegaMenuItem.hover(function () {
                if ($('> ul', this).length > 0) {
                    $('> ul', this).stop().addClass('ae_active');
                }
            }, function () {
                if ($('> ul', this).length > 0) {
                    $('> ul', this).stop().removeClass('ae_active');
                }
            });

            $('.cart-list').click(function (e) {
                $('.cart-box').slideToggle(300);
                e.stopPropagation();
            });
        }
        aeNavigation();

        /* --------------------
		03- Menu Toggle Nav.
	----------------------- */

        function aeMenuToggleNav() {

            $("#toggle_nav .menu-item-has-children > a").removeAttr("href");
            
            $("#toggle_nav .menu-item-has-children > a").click(function () {
                $(this).next('ul').stop(true, false, true).slideToggle(300);
                $(this).toggleClass('menu-item-open');
            });

        }
        aeMenuToggleNav();

        /* --------------------
		04- Comments
	----------------------- */

        function aeComments() {

            $('#comment_button').click(function () {
                $('.comments-area').addClass('ae_active');
                $(this).fadeOut(200);
            });

        }
        aeComments();

        /* --------------------
		04- Sticky Header.
	----------------------- */

        var $window = $(window);
        var lastScrollTop = 0;
        
       if (window.outerWidth > 992) {
            var $header = $('.wc-categories-bar');
        } else {
            var $header = $('.ae-header');  
        }
        
        var headerBottom = $header.position().top + $header.outerHeight(true);

        $window.scroll(function () {

            var windowTop = $window.scrollTop();

            // Add custom sticky class 
            if (windowTop >= 200) {
                $header.addClass('header-sticky');
            } else {
                $header.removeClass('header-sticky');
                $header.removeClass('header-show');
            }

            // Show/hide
            if ($header.hasClass('header-sticky')) {
                if (windowTop <= 200 || windowTop < lastScrollTop) {
                    $header.addClass('header-show');
                } else {
                    $header.removeClass('header-show');
                }
            }

            lastScrollTop = windowTop;

        });


        $(document).on('click', '[data-toggle="sbt"]', function () {
            var $target = $($(this).data('target'));
            var classes = $(this).data('classes');
            $('body').toggleClass('ov');
            $target.toggleClass(classes);
            return false;
        });

        $('.sbt-close').click(function () {
            $('.sbt').removeClass('sbt-active');
            $('body').toggleClass('ov');
        });

        $('.proj-mob-filter .control').click(function () {
            $('#proj_filter').removeClass('sbt-active');
            $('body').toggleClass('ov');
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });

    });
})(jQuery);
